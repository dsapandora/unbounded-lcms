<%= render partial: 'lobject_breadcrumbs' %>

<div class="nc-content">
    <div class=clearfix>
      <div class=pull-right>
        <%= link_to t('ui.edit'), edit_unbounded_admin_lobject_path(@lobject), class: 'btn btn-default' %>
        <%= link_to t('ui.delete'), delete_unbounded_admin_lobject_path(@lobject), class: 'btn btn-danger' %>
      </div>
    </div>

    <h2 class="text-center">Resource <%= @lobject.title %></h2><br>

    <h4 class="text-center">
    <a href="<%= @lobject.url.url %>" target="_blank">View Original</a>
    <% if @lobject.has_inactive_doc? %>
        <small><strong>(Not active)</strong></small>
    <% end %>
    </h4>

    <div class="row">
        <div class="col-lg-12">
            <h3>Title</h3>
            <p><%= @lobject.title %></p>
        </div>

        <div class="col-lg-12">
            <h3>Description</h3>
            <%= @lobject.engageny_description.html_safe %>
        </div>

        <div class="col-lg-12">
            <h3>Created on</h3>
            <p><%= @lobject.doc_created_at %></p>
        </div>

        <% if @lobject.lobject_grades.size > 0 %>
            <div class="col-lg-12">
                <h3>Grades</h3>
                <p>
                    <% @lobject.grades.uniq.map(&:grade).each do |grade| %>
                    <span class="label nc-label"><%= link_to(grade, unbounded_search_path(grade: grade)) %></span>
                    <% end %>
                </p>
            </div>
        <% end %>

        <% if @lobject.lobject_topics.size > 0 %>
            <div class="col-lg-12">
                <h3>Topics</h3>
                <p>
                    <% @lobject.lobject_topics.uniq.map(&:topic).uniq.map(&:name).each do |topic| %>
                    <span class="label nc-label"><%= link_to(topic, unbounded_search_path(topic: topic)) %></span>
                    <% end %>
                </p>
            </div>
        <% end %>

        <% if @lobject.lobject_subjects.size > 0 %>
            <div class="col-lg-12">
                <h3>Subjects</h3>
                <p>
                    <% @lobject.lobject_subjects.uniq.map(&:subject).uniq.map(&:name).each do |sub| %>
                    <span class="label nc-label"><%= link_to(sub, unbounded_search_path(subject: sub)) %></span>
                    <% end %>
                </p>
            </div>
        <% end %>

        <% if @lobject.lobject_resource_types.size > 0 %>
            <div class="col-lg-12">
                <h3>Resource Types</h3>
                <p>
                    <% @lobject.resource_types.uniq.map(&:name).each do |res| %>
                    <span class="label nc-label"><%= link_to(res, unbounded_search_path(resource_type: res)) %></span>
                    <% end %>
                </p>
            </div>
        <% end %>

        <% if @lobject.lobject_alignments.size > 0 %>
            <div class="col-lg-12">
                <h3>Standards</h3>
                <p>
                    <% @lobject.alignments.uniq.map(&:name).each do |ag| %>
                    <span class="label nc-label"><%= link_to(ag, unbounded_search_path(alignment: ag)) %></span>
                    <% end %>
                </p>
            </div>
        <% end %>

        <% if @lobject.lobject_downloads.size > 0 %>
            <div class="col-lg-12">
                <h3>Downloadable Resources</h3>
                <% @lobject.downloads.uniq.each do |download| %>
                <p>
                    <a target="_blank" href="<%= attachment_url(download) %>"><%= download.title %></a>
                    (<%= attachment_content_type(download) %>, <%= (download.filesize/1024.0).round(2) %> KB)
                </p>
                <% end %>
            </div>
        <% end %>

        <% if @lobject.collection_trees.size > 0 %>
            <div class="col-lg-12">
                <h3>Curriculum Map</h3>
                <div>
                    <ul class="lobject-tree">
                        <% @lobject.collection_trees.each do |tree| %>
                            <%= render partial: 'lobject_tree', locals: { tree: tree } %>
                        <% end %>
                    </ul>
                </div>
            </div>
        <% end %>

        <% if @lobject.related_lobjects.size > 0 %>
            <div class="col-lg-12">
                <h3>Related resources</h3>
                <div>
                    <ul>
                        <% @lobject.related_lobjects.each do |related_lobject| %>
                            <li>
                                <%= link_to(related_lobject.title, unbounded_show_path(id: related_lobject.id)) %>
                            </li>
                        <% end %>
                    </ul>
                </div>
            </div>
        <% end %>
    </div>
</div>
